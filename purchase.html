<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Order your custom portraits">
  <meta name="author" content="ChickFlex Arts">
  <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

  <title>Purchase Now - ChickFlex Arts</title>
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/fontawesome.css">
  <link rel="stylesheet" href="assets/css/templatemo-sixteen.css">
  <link rel="stylesheet" href="assets/css/owl.css">
</head>

<body>
  <div id="preloader">
    <div class="jumper">
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>

  <header>
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand" href="index.html"><h2>ChickFlex<em>Arts</em></h2></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="products.html">Our Products</a></li>
            <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
            <li class="nav-item"><a class="nav-link" href="contact.html">Contact Us</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <div class="page-heading contact-heading header-text">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="text-content">
            <h4>Place Your Order</h4>
            <h2>Portrait Purchase</h2>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="send-message">
    <div class="container">
      <div class="row">
        <div class="col-md-8">
          <div class="section-heading">
            <h2>Order Form</h2>
          </div>
          <form id="orderForm" enctype="multipart/form-data" onsubmit="submitOrder(event)">
            <div class="row">
              <div class="col-md-6 mb-3">
                <fieldset>
                  <input name="name" type="text" class="form-control" id="name" placeholder="Full Name" required>
                </fieldset>
              </div>
              <div class="col-md-6 mb-3">
                <fieldset>
                  <input name="email" type="email" class="form-control" id="email" placeholder="Email Address" required>
                </fieldset>
              </div>
              <div class="col-md-12 mb-3">
                <fieldset>
                  <input name="phone" type="text" class="form-control" id="phone" placeholder="Phone Number" required>
                </fieldset>
              </div>
              <div class="col-md-12 mb-3">
                <fieldset>
                  <textarea name="message" rows="6" class="form-control" id="message" placeholder="Describe your desired portrait, delivery option, etc." required></textarea>
                </fieldset>
              </div>
              <div class="col-md-12 mb-3">
                <fieldset>
                  <label for="size" style="margin-bottom: 10px;">Select Portrait Size (with price & delivery):</label>
                  <select name="size" id="size" class="form-control" required>
                    <option value="A4">A4 - Rs. 4,000 (5-7 days)</option>
                    <option value="A3">A3 - Rs. 5,500 (7-10 days)</option>
                    <option value="A5">A5 - Rs. 3,000 (3-5 days)</option>
                  </select>
                </fieldset>
              </div>
              <div class="col-md-12 mb-3">
                <fieldset>
                  <label for="framing" style="margin-top: 20px;">Add Framing Option:</label>
                  <select name="framing" id="framing" class="form-control">
                    <option value="No">No Frame</option>
                    <option value="Wooden">Wooden Frame - Rs. 1,000</option>
                    <option value="Classic">Classic Frame - Rs. 1,500</option>
                  </select>
                </fieldset>
              </div>
              <div class="col-md-12 mb-3">
                <fieldset>
                  <label for="rush" style="margin-top: 20px;">Rush Delivery:</label>
                  <select name="rush" id="rush" class="form-control">
                    <option value="No">No Rush</option>
                    <option value="Yes">Yes - Extra Rs. 1,000 (Delivery 2 days earlier)</option>
                  </select>
                </fieldset>
              </div>
              <div class="col-md-12 mb-4">
                <fieldset>
                  <label for="photoUpload" style="margin-bottom: 10px;">Upload a Photo for Portrait:</label>
                  <input name="photo" type="file" class="form-control-file" id="photoUpload" accept="image/*" required>
                </fieldset>
              </div>
              <input type="hidden" name="photo_url" id="photo_url" value="">

              <div class="col-md-12">
                <fieldset>
                  <button type="submit" id="form-submit" class="filled-button" style="background-color: #f33f3f; border-color: #f33f3f; color: white;">Submit Order</button>
                </fieldset>
              </div>
            </div>
          </form>
        </div>
        <div class="col-md-4">
          <div class="section-heading">
            <h2>Payment Guide</h2>
          </div>
          <p>We accept online payments via bank transfer and card payment. After submitting your order, we will contact you with the exact price and payment instructions.</p>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Step 1: Fill out and submit the order form</li>
            <li class="list-group-item">Step 2: Receive order confirmation and payment details</li>
            <li class="list-group-item">Step 3: Make your payment and send proof</li>
            <li class="list-group-item">Step 4: Portrait creation begins</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="inner-content">
            <p>Copyright &copy; 2023 ChickFlex Arts (pvt), Ltd.</p>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/custom.js"></script>
  <script src="assets/js/owl.js"></script>
  <script src="assets/js/slick.js"></script>
  <script src="assets/js/isotope.js"></script>
  <script src="assets/js/accordions.js"></script>

  <script>
    // Submit Order and handle image upload first
    function submitOrder(event) {
      event.preventDefault();

      // Handle image upload to ImgBB first
      const photoUpload = document.getElementById('photoUpload');
      const photoFile = photoUpload.files[0];

      if (!photoFile) {
        alert("Please upload a photo for the portrait.");
        return;
      }

      const formData = new FormData();
      formData.append('image', photoFile);

      // Upload image to ImgBB
      fetch('https://api.imgbb.com/1/upload?key=3d57b7d65e8755b81d625a2dfa1ba26f', {
        method: 'POST',
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        if (data && data.data && data.data.url) {
          document.getElementById('photo_url').value = data.data.url;

          // After image upload, store data in localStorage
          const orderForm = document.getElementById('orderForm');
          const orderData = new FormData(orderForm);

          localStorage.setItem('name', orderData.get('name'));
          localStorage.setItem('email', orderData.get('email'));
          localStorage.setItem('phone', orderData.get('phone'));
          localStorage.setItem('message', orderData.get('message'));
          localStorage.setItem('size', orderData.get('size'));
          localStorage.setItem('framing', orderData.get('framing'));
          localStorage.setItem('rush', orderData.get('rush'));
          localStorage.setItem('photo_url', data.data.url);

          // Redirect to payment page
          window.location.href = 'payment.html';
        } else {
          alert('Failed to upload image. Please try again.');
        }
      })
      .catch(error => {
        console.error('Image upload error:', error);
        alert('Failed to upload the image. Please try again.');
      });
    }
  </script>
</body>
</html>
